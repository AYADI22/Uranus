import telebot
import requests

# تعريف المتغيرات (المفاتيح)
# استبدل النص بين القوسين بالتوكن الحقيقي من تلجرام
TELEGRAM_"8306706068:AAEJfB5KY7vTei6RybrCFFXV3VOAj1ng07c"

# مفتاح OpenRouter الذي أرسلته لي
OPENROUTER_API_KEY = "Sk-or-v1-2952d44fbf6fbf5d3cdf7ae14f572820778888847907b86b873ddd19a7ed19a2"

bot = telebot.TeleBot(TELEGRAM_TOKEN)

@bot.message_handler(func=lambda message: True)
def handle_message(message):
    # استخدام المتغير OPENROUTER_API_KEY في الطلب
    headers = {
        "Authorization": f"Bearer {OPENROUTER_API_KEY}",
        "Content-Type": "application/json"
    }
    
    payload = {
        "model": "qwen/qwen3-coder:free",
        "messages": [{"role": "user", "content": message.text}]
    }

    response = requests.post("https://openrouter.ai/api/v1/chat/completions", headers=headers, json=payload)
    
    if response.status_code == 200:
        bot.reply_to(message, response.json()['choices'][0]['message']['content'])
    else:
        bot.reply_to(message, "خطأ في الاتصال بالذكاء الاصطناعي.")

print("البوت يعمل الآن بأمان...")
bot.polling()
